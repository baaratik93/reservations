{% load static %}
<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static "css/output.css" %}">
    <title>Tigers Booking | {{title}}</title>

</head>

<body>
    <div class="head">
        <a class="logo" href="/">
            <img src="{% static "images/76665-457-1641395215_db5fe75d0a7dc3b29bb8e4ff5589b24b.jpeg" %}" width="120px"
                height="120px" alt="logo">
            <h2>Tigers Booking</h2>
        </a>
        <input type="search" name="" id="">
        <nav>
            <a href="/cars">Véhicules</a>
            <a href="/hotels">Hotels</a>
            <a href="/hotels">Vols</a>
            <a href="/reserver"
                style="background-color:orange;margin-top:-5px;padding:5px;border-radius:10px;display:none;">Reserver</a>
        </nav>
        <!-- <a href="/connexion/login">
                <button >Connexion</button>
                <button style="background-color: skyblue;">Deconnexion</button>
                <div style="color:blue">{{ user.7 }}</div>
        </a> -->
        <div class="connexion">
            {% if request.session.user.7 %}
                <a href="/connexion/deconnexion">Deconnexion</a>
                <div style="letter-spacing: 8px;background:wheat; padding: 5px; border: 1px solid lime; border-radius: 10px;">{{request.session.user.7}}</div style="letter-spacing: 8px; padding: 5px; border: 1px solid red">
            {% else %}
                <a href="/connexion/login">Connexion</a>
            {% endif %}
            {% if request.session.reserved %}
            <a href="/reserver">Valider réservation[{{ request.session.reserved | length}}]</a>
            {% endif %}
            
        </div>

    </div>
    {% block content %}
    {% endblock %}
    <div>
        <p>Ici le footer</p>
    </div>
    <!-- <script>
        const conn = document.querySelector('button:nth-child(1)')
        const dec = document.querySelector('button:nth-child(2)')
        const jwt = localStorage.getItem("jwt")
        if (jwt) {
            conn.style.display = 'none'
            document.querySelector('nav>a:nth-child(4)').style.display = 'inline'
        } else {
            dec.style.display = 'none'
        }

        dec.addEventListener("click", () => {
            localStorage.removeItem("jwt")
            // Création des données à envoyer
            var data = {
                user: 'deconnecter utilisateur'
            };

            // Configuration de la requête Fetch
            var url = 'http://127.0.0.1/connexion/deconnexion';
            var options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': '{{ csrf_token }}'  // Si vous utilisez CSRF protection
                },
                body: JSON.stringify(data)
            };

            // Envoi de la requête Fetch
            fetch(url, options)
                .then(response => {
                    // Gérer la réponse de la requête ici
                    console.log(response)
                })
                .catch(error => {
                    // Gérer les erreurs ici
                    console.log(error)
                });
        })
    </script> -->
</body>

</html>